---
interface Props {
  href?: string;
  class?: string;
  [key: string]: any;
}

const { href, class: className, ...rest } = Astro.props;

const Tag = href ? 'a' : 'button';
---

<Tag 
  href={href} 
  class:list={['btn', className]} 
  type={!href ? 'button' : undefined} 
  {...rest}
>
  <slot />
</Tag>

<script>
  const buttons = document.querySelectorAll('.btn') as NodeListOf<HTMLElement>;
  buttons.forEach(btn => {
    btn.addEventListener('mouseenter', () => {
      const hue = Math.floor(Math.random() * 360);
      btn.style.setProperty('--btn-fill', `oklch(0.7 0.153 ${hue})`);
    });
    btn.addEventListener('mouseleave', () => {
      btn.style.removeProperty('--btn-fill');
    });
  });
</script>

<style>
  .btn {
    /* Layout */
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem; /* 8px */
    padding: 0.8rem 1.5rem; /* 16px 24px */
    border-radius: 4px;
    width: 100%;
    max-width: fit-content;
    
    /* Typography */
    font-family: var(--font-sans);
    font-size: var(--fs-body-medium);
    font-weight: 500;
    line-height: 1.5;
    text-decoration: none;
    cursor: pointer;
    word-wrap: break-word;

    /* Colors (Outline Variant Default) */
    /* Uses --btn-fill if set (by hover), else persistent or fallback */
    background: var(--btn-fill, transparent);
    color: var(--stone-900);
    border: 1px solid var(--btn-fill, var(--stone-900));
    outline: none;
    
    /* Transition */
    transition: background-color 0.1s ease, border-color 0.1s ease;
  }
</style>
