/* Fonts & Colors */
:root {
    --font-sans: 'Inter', system-ui, sans-serif;
    --font-serif: 'Fraunces', serif;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

    /* Fluid Typography (Min: Mobile, Max: Desktop) */
    --fs-h1: clamp(2rem, 1.55rem + 2.25vw, 2.5rem);
    /* 32px → 40px */
    --fs-h2: clamp(1.625rem, 1.35rem + 1.35vw, 2rem);
    /* 26px → 32px */
    --fs-h3: clamp(1.25rem, 1.15rem + 0.5vw, 1.5rem);
    /* 20px → 24px */

    --fs-body-large: clamp(1.125rem, 1.0739rem + 0.2273vw, 1.25rem);
    /* 16px → 18px */
    --fs-body-medium: clamp(1rem, 0.9489rem + 0.2273vw, 1.125rem);
    /* 14px → 16px */
    --fs-body-small: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
    /* 12px → 14px */

    /* Stone Palette (OKLCH) */
    --stone-h: 60;
    --stone-c: 0.02;

    --stone-50: #fefbf6;
    --stone-100: oklch(95% var(--stone-c) var(--stone-h));
    --stone-200: oklch(90% var(--stone-c) var(--stone-h));
    --stone-300: oklch(80% var(--stone-c) var(--stone-h));
    --stone-400: oklch(70% var(--stone-c) var(--stone-h));
    --stone-500: oklch(60% var(--stone-c) var(--stone-h));
    --stone-600: oklch(50% var(--stone-c) var(--stone-h));
    --stone-700: oklch(40% var(--stone-c) var(--stone-h));
    --stone-800: oklch(30% var(--stone-c) var(--stone-h));
    --stone-900: oklch(20% var(--stone-c) var(--stone-h));
    --stone-950: oklch(10% var(--stone-c) var(--stone-h));

    /* Semantic Variables (Light Mode Default) */
    --bg-dynamic: var(--stone-50);
    --bg-primary: var(--stone-50);
    /* Explicitly Stone-50, ignoring dynamic overrides */
    --bg-secondary: var(--stone-100);
    --bg-tertiary: var(--stone-200);

    --text-primary: var(--stone-950);
    --text-secondary: var(--stone-700);

    /* Legacy Mappings to prevent breakage */
    --bg-page: var(--bg-primary);
    /* For Layout.astro overrides/fallbacks */
    --text-link: var(--stone-950);
    --text-link-hover: #0055ff;

    --border-default: var(--stone-200);
}

/* Dark mode via system preference */
/* Dark mode via system preference handles by JS in Layout (fallback removed) */

/* Dark mode via explicit toggle */
:root[data-theme="dark"] {
    --bg-dynamic: var(--stone-900);
    --bg-primary: var(--bg-dynamic);
    --bg-secondary: var(--stone-800);
    --bg-tertiary: var(--stone-600);

    --text-primary: var(--stone-50);
    --text-secondary: var(--stone-400);

    /* Legacy Mappings */
    --bg-page: var(--bg-primary);
    --text-link: var(--stone-50);
    --text-link-hover: #4d8bff;

    --border-default: var(--stone-800);
}

/* Global Reset */
html {
    box-sizing: border-box;
}

*,
*::before,
*::after {
    box-sizing: inherit;
}

body {
    font-family: var(--font-sans);
    font-weight: 400;
    /* Regular weight for body */
    font-size: var(--fs-body-medium);
    /* Default to Body Medium */
    letter-spacing: -0.01em;
    margin: 0;
    color: var(--text-primary);
    background: var(--bg-primary);
    /* Added fallback for page-bg */
    -webkit-font-smoothing: antialiased;
    line-height: 1.5;
    /* Good reading height */
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Links */
a {
    color: inherit;
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
    transition: color 0.1s ease;
}

a:hover {
    color: var(--link-hover-color, var(--text-link-hover));
}

/* Typography Headings */
h1,
h2,
h3 {
    font-family: var(--font-serif);
    font-weight: 500;
    font-variation-settings: "WONK" 1;
    margin: 0;
    color: var(--text-primary);
}

h1 {
    font-size: var(--fs-h1);
    line-height: 1.15;
    letter-spacing: -0.02em;
}

h2 {
    font-size: var(--fs-h2);
    line-height: 1.2;
    letter-spacing: -0.02em;
}

h3 {
    font-size: var(--fs-h3);
    line-height: 1.3;
    letter-spacing: -0.01em;
    font-family: var(--font-sans);
    /* H3 often sans in this design, keeping as per prev */
}

/* Body Classes */
.text-large {
    font-size: var(--fs-body-large);
    line-height: 1.5;
}

.text-medium {
    font-size: var(--fs-body-medium);
    line-height: 1.5;
}

.text-small,
small {
    font-size: var(--fs-body-small);
    line-height: 1.5;
}

/* Utility Classes */
.desktop-only {
    display: block;
}

@media (max-width: 900px) {
    .desktop-only {
        display: none;
    }
}

.section-title {
    margin-bottom: 1.5rem;
}

/* Lists */
ol,
ul {
    display: flex;
    flex-direction: column;
}

.layout-wrapper {
    width: 100%;
    max-width: 1246px;
    /* 1200 + padding */
    margin: 0 auto;
    background: var(--bg-primary);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    /* Move horizontal padding back to r-grid for full-bleed support */
    box-sizing: border-box;
}

/* Links */
a {
    color: var(--text-link);
}

/* Grid System */
r-grid {
    display: grid;
    /* Flatten minmax for full control */
    grid-template-columns: repeat(var(--grid-columns), 1fr);
    /* Fixed gap */
    gap: 4rem;
    /* 64px */

    /* 1080px Layout Defaults */
    max-width: 1080px;
    margin-inline: auto;
    padding-inline: 0;
}

@media (max-width: 1150px) {
    r-grid {
        padding-inline: 2rem;
        max-width: 100%;
    }
}

@media (max-width: 900px) {
    r-grid {
        gap: 1rem;
    }
}

.page-grid {
    padding-top: 8rem;
    padding-bottom: 2rem;
}



r-cell {
    grid-column: span var(--grid-span, 1);
    order: var(--grid-order, 0);
}

/* Attribute Selectors for Columns */
r-grid[columns="6"] {
    --grid-columns: 6;
}

r-grid[columns="12"] {
    --grid-columns: 12;
}

/* Attribute Selectors for Spans */
r-cell[span="1"] {
    --grid-span: 1;
}

r-cell[span="2"] {
    --grid-span: 2;
}

r-cell[span="3"] {
    --grid-span: 3;
}

r-cell[span="4"] {
    --grid-span: 4;
}

r-cell[span="5"] {
    --grid-span: 5;
}

r-cell[span="6"] {
    --grid-span: 6;
}

r-cell[span="1-2"] {
    grid-column: 1 / span 2;
}

r-cell[span="1-3"] {
    grid-column: 1 / span 3;
}

r-cell[span="1-4"] {
    grid-column: 1 / span 4;
}

r-cell[span="2-5"] {
    grid-column: 2 / span 4;
}

r-cell[span="1-5"] {
    grid-column: 1 / span 5;
}

r-cell[span="5-6"] {
    grid-column: 5 / span 2;
}

r-cell[span="3-6"] {
    grid-column: 3 / span 4;
}

r-cell[span="2-3"] {
    grid-column: 2 / span 2;
}

r-cell[span="4-6"] {
    grid-column: 4 / span 3;
}

/* Matches example usage somewhat */

/* Specific helper for row spanning if needed, though example acts like flex/grid item */
r-cell[span="row"] {
    grid-column: 1 / -1;
}

/* Order */
r-cell[order="-10"] {
    order: -10;
}

r-cell[order="-9"] {
    order: -9;
}

r-cell[order="-1"] {
    order: -1;
}

/* Responsive: S (Tablet/Small Laptop - e.g. < 900px) */
@media (max-width: 900px) {
    r-grid[columns-s="4"] {
        --grid-columns: 2;
    }

    r-cell[span-s="1"] {
        --grid-span: 1;
        grid-column: span 1;
    }

    r-cell[span-s="2"] {
        --grid-span: 2;
        grid-column: span 2;
    }

    r-cell[span-s="3"] {
        --grid-span: 3;
        grid-column: span 3;
    }

    r-cell[span-s="4"] {
        --grid-span: 4;
        grid-column: span 4;
    }

    r-cell[span-s="row"] {
        grid-column: 1 / -1;
    }

    r-cell[span-s="3-4"] {
        grid-column: 3 / span 2;
    }
}

/* Responsive: XS (Mobile - e.g. < 600px) */
@media (max-width: 600px) {
    r-grid[columns-xs="2"] {
        --grid-columns: 1;
    }

    r-grid {
        padding: 4rem 1.5rem;
    }

    r-cell[span-xs="1"] {
        --grid-span: 1;
        grid-column: span 1;
    }

    r-cell[span-xs="2"] {
        --grid-span: 2;
        grid-column: span 2;
    }

    r-cell[span-xs="row"] {
        grid-column: 1 / -1;
    }

    r-cell[order-xs="-1"] {
        order: -1;
    }
}

/* Utility Classes */
.menu {
    font-family: var(--font-mono);
    font-size: 0.85rem;
}

.menu a {
    display: block;
    text-decoration: none;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
}

.menu a:hover {
    color: var(--text-primary);
}

.menu .focus1 a:first-child {
    color: var(--text-primary);
}

.intro p {
    margin-top: 1rem;
    margin-bottom: 2rem;
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--text-primary);
}

.bio img {
    width: 100%;
    height: auto;
    border-radius: 4px;
    margin-bottom: 1rem;
    background: var(--bg-secondary);
}

.link-list a {
    display: inline-block;
    margin-right: 1rem;
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 0.9rem;
}

.tidbit h2 {
    margin-bottom: 0.5rem;
    font-family: var(--font-mono);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: 0.8rem;
    color: var(--text-secondary);
    /* Mapped to secondary */
}

.tidbit p {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 0;
}